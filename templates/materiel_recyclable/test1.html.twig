{% extends 'base.html.twig' %}

{% block body %} 
<div class="form-wrapper"> 
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="form-container">
                <h3 class="section-subtitle"><i class="fa fa-edit mr-2"></i>Détails du Produit</h3>

                {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}

                {# Zone d'upload d'image avec prévisualisation #}
                <div class="form-group mb-4 text-center">
                    <label for="image-upload" class="d-block" style="cursor: pointer;">
                        <div class="image-upload-box p-3 border rounded">
                            <i class="fa fa-camera-retro icon-upload fa-2x"></i>
                            <p class="m-0">Glisser-déposer ou cliquer</p>
                            <small class="text-muted d-block">(Format JPG/PNG, max 5MB)</small>
                        </div>
                    </label>

                    <!-- Affichage de l’image sélectionnée -->
                    <div class="mt-3 text-center">
                        {% if materiel.image %}
                            <img id="image-preview" src="{{ asset('materielimage/' ~ materiel.image) }}" 
                                 alt="{{ materiel.image }}" class="img-fluid img-thumbnail" style="max-width: 250px;">
                        {% else %}
                            <img id="image-preview" src="#" alt="Aperçu de l'image"
                                 class="img-fluid img-thumbnail d-none" style="max-width: 250px;">
                        {% endif %}
                    </div>

                    <!-- Input File -->
                    <div class="form-group mt-3">
                        {{ form_widget(form.image, { 'attr': {'class': 'form-control d-none', 'id': 'image-upload', 'accept': 'image/*', 'onchange': 'previewImage(event)'} }) }}
                        {{ form_errors(form.image) }}
                    </div>
                </div>

                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>


{% endblock %}
